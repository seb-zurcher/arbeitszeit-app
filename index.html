
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Arbeitszeit‑Rechner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0078d4">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>

  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
    .box { background: #fff; padding: 20px; max-width: 520px; border-radius: 12px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    input[type=time], input[type=number] { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ccc; font-size: 16px; }
    .row { display:flex; gap:12px; }
    .row > div { flex:1; }
    button { width: 100%; padding: 12px; background: #0078d4; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; margin-top: 16px; }
    .result { margin-top: 18px; padding: 12px; background: #e8f4ff; border-left: 4px solid #0078d4; border-radius: 6px; }
    .muted { color:#666; font-size: 13px; }
  </style>
</head>
<body>
  <div class="box">
    <h2>Arbeitszeit‑Rechner</h2>

    <div class="row">
      <div>
        <label>Arbeitsbeginn</label>
        <input type="time" id="start" />
      </div>
      <div>
        <label>Mittagspause Start</label>
        <input type="time" id="lunchStart" />
      </div>
    </div>

    <div class="row">
      <div>
        <label>Mittagspause Ende</label>
        <input type="time" id="lunchEnd" />
      </div>
      <div>
        <label>Überzeit (min) ±</label>
        <input type="number" id="overtime" value="0" step="5" />
      </div>
    </div>

    <div class="muted">Sollzeit ist fix: <strong>8 h 18 min</strong> (498 min)</div>

    <button id="calcBtn">Feierabend berechnen</button>

    <div id="output" class="result" style="display:none"></div>
  </div>

<script>
const TARGET_MIN = 8 * 60 + 18;
function toMinutes(str) { const [h,m] = str.split(':').map(Number); return h*60+m; }
function minutesToHHMM(mins) { mins=((mins%(24*60))+(24*60))%(24*60); const h=Math.floor(mins/60), m=mins%60; return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`; }
function fmtMinutesSigned(m){return m>0?`+${m} min`:m<0?`−${Math.abs(m)} min`:'0 min'}

function calcFeierabend(){
  const start=toMinutes(document.getElementById('start').value);
  const ls=toMinutes(document.getElementById('lunchStart').value);
  const le=toMinutes(document.getElementById('lunchEnd').value);
  const ot=parseInt(document.getElementById('overtime').value||0);
  if(isNaN(start)||isNaN(ls)||isNaN(le)) return alert('Bitte Zeiten ausfüllen.');
  if(ls<=start) return alert('Mittag Start muss nach Arbeitsbeginn sein.');
  if(le<=ls) return alert('Mittag Ende muss nach Mittag Start sein.');

  const morning = ls-start;
  let feierabend;
  if(morning>=TARGET_MIN) feierabend=start+TARGET_MIN;
  else feierabend=le+(TARGET_MIN-morning);

  const withOT = feierabend+ot;
  const out=document.getElementById('output'); out.style.display='block';
  out.innerHTML=`<strong>Feierabend (Soll):</strong> ${minutesToHHMM(feierabend)}<br>
                 <strong>Feierabend (mit Überzeit):</strong> ${minutesToHHMM(withOT)}<br>
                 <strong>Überzeit/Unterzeit:</strong> ${fmtMinutesSigned(ot)}`;
}

document.getElementById('calcBtn').addEventListener('click', calcFeierabend);
</script>
</body>
</html>
